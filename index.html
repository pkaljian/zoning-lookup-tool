<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zoning Lookup Tool</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.5em;
            font-weight: 300;
        }

        .subtitle {
            text-align: center;
            color: #7f8c8d;
            margin-bottom: 40px;
            font-size: 1.1em;
        }

        .query-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 30px;
            margin-bottom: 30px;
            border-left: 5px solid #3498db;
        }

        .query-title {
            font-size: 1.3em;
            color: #2c3e50;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .query-form {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            gap: 15px;
        }

        .query-text {
            font-size: 1.1em;
            color: #34495e;
        }

        select {
            padding: 10px 15px;
            border: 2px solid #bdc3c7;
            border-radius: 8px;
            font-size: 1em;
            background: white;
            min-width: 200px;
            transition: border-color 0.3s ease;
        }

        select:focus {
            outline: none;
            border-color: #3498db;
        }

        button {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-size: 1em;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .results {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-top: 30px;
            border: 1px solid #ecf0f1;
            min-height: 100px;
        }

        .results h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .result-item {
            background: #f1f2f6;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #27ae60;
        }

        .result-item.conditional {
            border-left-color: #f39c12;
        }

        .result-item.not-permitted {
            border-left-color: #e74c3c;
        }

        .result-item.accessory {
            border-left-color: #9b59b6;
        }

        .zone-name {
            font-weight: bold;
            color: #2c3e50;
        }

        .permission-detail {
            margin-top: 5px;
            color: #555;
            font-size: 0.95em;
        }

        .loading {
            text-align: center;
            color: #7f8c8d;
            font-style: italic;
        }

        .no-results {
            text-align: center;
            color: #e74c3c;
            font-style: italic;
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .query-form {
                flex-direction: column;
                align-items: stretch;
            }
            
            select {
                min-width: auto;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Zoning Lookup Tool</h1>
        <p class="subtitle">Find zoning permissions for land uses quickly and easily</p>
        <div style="background: #fff3cd; border: 1px solid #ffeaa7; border-radius: 8px; padding: 15px; margin-bottom: 30px; border-left: 5px solid #fdcb6e;">
            <strong>‚ö†Ô∏è Important Disclaimer:</strong> This tool provides general zoning information for reference purposes only. Always verify requirements with the Planning Department before making final development decisions. Zoning regulations may have additional requirements, recent updates, or site-specific considerations not reflected in this tool.
            <br><br>
            <strong>üìã Additional Resources:</strong>
            <a href="https://cityofpetaluma.org/zoning-map/" target="_blank" style="color: #2980b9; text-decoration: none;">View Official Zoning Map</a> | 
            <a href="https://petaluma.municipal.codes/SmartCode/2" target="_blank" style="color: #2980b9; text-decoration: none;">View Smart Code and Zoning Code</a>
        </div>

        <div class="query-section">
            <div class="query-title">Where can I put a specific use?</div>
            <div class="query-form">
                <span class="query-text">Where can I put a</span>
                <select id="landUseSelect">
                    <option value="">Select a land use...</option>
                </select>
                <span class="query-text">?</span>
                <button onclick="searchByLandUse()">Find Zones</button>
            </div>
        </div>
<div style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 6px; padding: 10px; margin-top: 15px; font-size: 0.9em; color: #6c757d;">
    Need help understanding a land use? <a href="https://petaluma.municipal.codes/ZoningOrds/28" target="_blank" style="color: #2980b9; text-decoration: none;">Find land use definitions here</a>
</div>
<div style="text-align: center; font-size: 1.2em; color: #7f8c8d; margin: 20px 0;">
    ‚Äî OR ‚Äî
</div>
        <div class="query-section">
            <div class="query-title">What's allowed in a specific zone?</div>
            <div class="query-form">
                <span class="query-text">What's allowed in</span>
                <select id="zoneSelect">
                    <option value="">Select a zone...</option>
                </select>
                <span class="query-text">zoning?</span>
                <button onclick="searchByZone()">Show Uses</button>
            </div>
        </div>
<div style="background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 6px; padding: 10px; margin-top: 15px; font-size: 0.9em; color: #6c757d;">
    Properties in PUD/PCD zones may have additional requirements. <a href="https://cityofpetaluma.org/pud-and-pcd-guidelines/" target="_blank" style="color: #2980b9; text-decoration: none;">Check specific plan guidelines</a>
</div>
        <div class="results" id="results">
            <p class="loading">Select a query above to get started</p>
        </div>
    </div>
<script src="zoningData.js"></script>

        // Populate dropdowns
        function populateDropdowns() {
            console.log('Populating dropdowns...');
            const landUseSelect = document.getElementById('landUseSelect');
            const zoneSelect = document.getElementById('zoneSelect');

            // Test if elements exist
            if (!landUseSelect) {
                console.error('landUseSelect not found!');
                return;
            }
            if (!zoneSelect) {
                console.error('zoneSelect not found!');
                return;
            }

            console.log('Adding land uses:', landUses);
            landUses.forEach(use => {
                const option = document.createElement('option');
                option.value = use;
                option.textContent = use;
                landUseSelect.appendChild(option);
            });

            console.log('Adding zones:', zones);
            zones.forEach(zone => {
                const option = document.createElement('option');
                option.value = zone;
                option.textContent = zone;
                zoneSelect.appendChild(option);
            });
            
            console.log('Dropdowns populated successfully');
        }

        function getPermissionClass(permission) {
            if (permission === "Not Permitted") return "not-permitted";
            if (permission.startsWith("CUP")) return "conditional";
            if (permission.startsWith("A")) return "accessory";
            return "permitted";
        }

        function searchByLandUse() {
            const selectedUse = document.getElementById('landUseSelect').value;
            const results = document.getElementById('results');
            
            if (!selectedUse) {
                results.innerHTML = '<p class="no-results">Please select a land use first.</p>';
                return;
            }

            const useData = zoningData[selectedUse];
            let html = `<h3>Where "${selectedUse}" is allowed:</h3>`;
            
            const permitted = [];
            const conditional = [];
            const accessory = [];
            const notPermitted = [];

            Object.entries(useData).forEach(([zone, permission]) => {
                const item = { zone, permission };
                
                if (permission === "Not Permitted") {
                    notPermitted.push(item);
                } else if (permission.startsWith("CUP")) {
                    conditional.push(item);
                } else if (permission.startsWith("A")) {
                    accessory.push(item);
                } else {
                    permitted.push(item);
                }
            });

            if (permitted.length > 0) {
                html += '<h4 style="color: #27ae60; margin-top: 20px;">Permitted:</h4>';
                permitted.forEach(item => {
                    html += `<div class="result-item permitted">
                        <span class="zone-name">${item.zone}</span>
                        <div class="permission-detail">${item.permission}</div>
                    </div>`;
                });
            }

            if (conditional.length > 0) {
                html += '<h4 style="color: #f39c12; margin-top: 20px;">Conditional Use Permit Required:</h4>';
                conditional.forEach(item => {
                    html += `<div class="result-item conditional">
                        <span class="zone-name">${item.zone}</span>
                        <div class="permission-detail">${item.permission}</div>
                    </div>`;
                });
            }

            if (accessory.length > 0) {
                html += '<h4 style="color: #9b59b6; margin-top: 20px;">Accessory Use:</h4>';
                accessory.forEach(item => {
                    html += `<div class="result-item accessory">
                        <span class="zone-name">${item.zone}</span>
                        <div class="permission-detail">${item.permission}</div>
                    </div>`;
                });
            }

            results.innerHTML = html;
        }

        function searchByZone() {
            const selectedZone = document.getElementById('zoneSelect').value;
            const results = document.getElementById('results');
            
            if (!selectedZone) {
                results.innerHTML = '<p class="no-results">Please select a zone first.</p>';
                return;
            }

            let html = `<h3>What's allowed in ${selectedZone} zoning:</h3>`;
            
            const permitted = [];
            const conditional = [];
            const accessory = [];

            Object.entries(zoningData).forEach(([landUse, zones]) => {
                const permission = zones[selectedZone];
                if (permission && permission !== "Not Permitted") {
                    const item = { landUse, permission };
                    
                    if (permission.startsWith("CUP")) {
                        conditional.push(item);
                    } else if (permission.startsWith("A")) {
                        accessory.push(item);
                    } else {
                        permitted.push(item);
                    }
                }
            });

            if (permitted.length > 0) {
                html += '<h4 style="color: #27ae60; margin-top: 20px;">Permitted Uses:</h4>';
                permitted.forEach(item => {
                    html += `<div class="result-item permitted">
                        <span class="zone-name">${item.landUse}</span>
                        <div class="permission-detail">${item.permission}</div>
                    </div>`;
                });
            }

            if (conditional.length > 0) {
                html += '<h4 style="color: #f39c12; margin-top: 20px;">Conditional Use Permit Required:</h4>';
                conditional.forEach(item => {
                    html += `<div class="result-item conditional">
                        <span class="zone-name">${item.landUse}</span>
                        <div class="permission-detail">${item.permission}</div>
                    </div>`;
                });
            }

            if (accessory.length > 0) {
                html += '<h4 style="color: #9b59b6; margin-top: 20px;">Accessory Uses:</h4>';
                accessory.forEach(item => {
                    html += `<div class="result-item accessory">
                        <span class="zone-name">${item.landUse}</span>
                        <div class="permission-detail">${item.permission}</div>
                    </div>`;
                });
            }

            if (permitted.length === 0 && conditional.length === 0 && accessory.length === 0) {
                html += '<p class="no-results">No uses are specifically allowed in this zone.</p>';
            }

            results.innerHTML = html;
        }

        // Initialize the page when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing...');
            populateDropdowns();
        });
    </script>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Permitting Pathway Tool</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
            animation: slideUp 0.6s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header {
            background: linear-gradient(135deg, #2c3e50, #3498db);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .content {
            padding: 40px;
        }

        .question-container {
            background: #f8f9ff;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 25px;
            border-left: 5px solid #667eea;
            animation: fadeIn 0.4s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .question {
            font-size: 1.3em;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
        }

        .context {
            font-size: 0.95em;
            color: #666;
            margin-bottom: 25px;
            font-style: italic;
        }

        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            transition: all 0.3s ease;
            min-width: 120px;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        .result {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin-top: 20px;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }

        .result h3 {
            font-size: 1.4em;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .result p {
            font-size: 1.1em;
            line-height: 1.7;
        }

        .breadcrumb {
            background: #e8f4fd;
            padding: 15px 25px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.9em;
            color: #2c3e50;
        }

        .breadcrumb strong {
            color: #3498db;
        }

        .restart-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            margin-top: 20px;
        }

        .restart-btn:hover {
            box-shadow: 0 6px 20px rgba(231, 76, 60, 0.4);
        }

        .back-btn {
            background: linear-gradient(135deg, #95a5a6, #7f8c8d);
            color: white;
            border: none;
            padding: 10px 18px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 500;
            transition: all 0.3s ease;
            min-width: 90px;
            box-shadow: 0 4px 15px rgba(149, 165, 166, 0.3);
        }

        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(149, 165, 166, 0.4);
        }

        .back-btn:active {
            transform: translateY(0);
        }

        .progress-bar {
            height: 4px;
            background: #ecf0f1;
            margin-bottom: 20px;
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #667eea, #764ba2);
            width: 0%;
            transition: width 0.5s ease;
        }

        .code-section {
            background: #2c3e50;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            font-weight: bold;
            margin-left: 10px;
        }

        @media (max-width: 600px) {
            .content {
                padding: 20px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
        }
    </style>
</head>
</html>
